date_breaks = "1 year",
date_labels = "%Y") +
scale_y_log10("Cited By") +
scale_color_manual("Open Practices", values = c("firebrick", "dodgerblue")) +
theme(legend.position = c(.85, .9))
ggplot(badges, aes(x = date, y = cited_by, color = open)) +
geom_point(alpha = 0.4) +
geom_smooth(method = "loess", formula = y ~ x, se = FALSE) +
scale_x_date("Publicaton Date",
date_breaks = "1 year",
date_labels = "%Y") +
scale_y_log10("Cited By") +
scale_color_manual("Open Practices", values = c("firebrick", "dodgerblue")) +
theme(legend.position = c(.85, .85))
ggplot(badges, aes(x = date, y = cited_by, color = open)) +
geom_point(alpha = 0.4) +
geom_smooth(method = "loess", formula = y ~ x, se = FALSE) +
scale_x_date("Publicaton Date",
date_breaks = "1 year",
date_labels = "%Y") +
scale_y_log10("Cited By") +
scale_color_manual("Open Practices", values = c("firebrick", "dodgerblue")) +
theme(legend.position = c(.85, .85),
axis.text.x = element_text(angle = 45))
ggplot(badges, aes(x = date, y = cited_by, color = open)) +
geom_point(alpha = 0.4) +
geom_smooth(method = "loess", formula = y ~ x, se = FALSE) +
scale_x_date("Publicaton Date",
date_breaks = "1 year",
date_labels = "%Y") +
scale_y_log10("Cited By") +
scale_color_manual("Open Practices", values = c("firebrick", "dodgerblue")) +
theme(legend.position = c(.85, .85),
axis.text.x = element_text(angle = -45))
ggplot(badges, aes(x = date, y = cited_by, color = open)) +
geom_point(alpha = 0.4) +
geom_smooth(method = "loess", formula = y ~ x, se = FALSE) +
scale_x_date("Publicaton Date",
date_breaks = "1 year",
date_labels = "%Y") +
scale_y_log10("Cited By") +
scale_color_manual("Open Practices", values = c("firebrick", "dodgerblue")) +
theme(legend.position = c(.85, .85),
axis.text.x = element_text(angle = -45, hjust = 1))
ggplot(badges, aes(x = date, y = cited_by, color = open)) +
geom_point(alpha = 0.4) +
geom_smooth(method = "loess", formula = y ~ x, se = FALSE) +
scale_x_date("Publicaton Date",
date_breaks = "1 year",
date_labels = "%Y") +
scale_y_log10("Cited By") +
scale_color_manual("Open Practices", values = c("firebrick", "dodgerblue")) +
theme(legend.position = c(.85, .85),
axis.text.x = element_text(angle = -45, hjust = 0))
?scale_y_log10
ggplot(badges, aes(x = date, y = cited_by, color = open)) +
geom_point(alpha = 0.4) +
geom_smooth(method = "loess", formula = y ~ x, se = FALSE) +
scale_x_date("Publicaton Date",
date_breaks = "1 year",
date_labels = "%Y") +
scale_y_log10("Cited By", expand = expansion(add = 0.1)) +
scale_color_manual("Open Practices", values = c("firebrick", "dodgerblue")) +
theme(legend.position = c(.85, .85),
axis.text.x = element_text(angle = -45, hjust = 0))
ggplot(badges, aes(x = date, y = cited_by, color = open)) +
geom_point(alpha = 0.4) +
geom_smooth(method = "loess", formula = y ~ x, se = FALSE) +
scale_x_date("Publicaton Date",
date_breaks = "1 year",
date_labels = "%Y") +
scale_y_log10("Cited By", expand = expansion(add = 1)) +
scale_color_manual("Open Practices", values = c("firebrick", "dodgerblue")) +
theme(legend.position = c(.85, .85),
axis.text.x = element_text(angle = -45, hjust = 0))
ggplot(badges, aes(x = date, y = cited_by, color = open)) +
geom_point(alpha = 0.4) +
geom_smooth(method = "loess", formula = y ~ x, se = FALSE) +
scale_x_date("Publicaton Date",
date_breaks = "1 year",
date_labels = "%Y") +
scale_y_log10("Cited By", expand = expansion(add = 0.1)) +
scale_color_manual("Open Practices", values = c("firebrick", "dodgerblue")) +
theme(legend.position = c(.85, .85),
axis.text.x = element_text(angle = -45, hjust = 0))
ggplot(badges, aes(x = date, y = cited_by, color = open)) +
geom_point(alpha = 0.4) +
geom_smooth(method = "loess", formula = y ~ x, se = FALSE) +
scale_x_date("Publicaton Date",
date_breaks = "1 year",
date_labels = "%Y") +
scale_y_log10("Cited By") +
scale_color_manual("Open Practices", values = c("firebrick", "dodgerblue")) +
theme(legend.position = c(.85, .85),
axis.text.x = element_text(angle = -45, hjust = 0))
ggplot(badges, aes(x = date, y = cited_by, color = open)) +
geom_point(alpha = 0.4) +
geom_smooth(method = "loess", formula = y ~ x, se = FALSE) +
scale_x_date("Publicaton Date",
date_breaks = "1 year",
date_labels = "%Y") +
scale_y_log10("Cited By") +
scale_color_manual("Open Practices", values = c("firebrick", "dodgerblue")) +
theme(legend.position = c(.85, .85),
axis.text.x = element_text(angle = -45, hjust = 0))
source("R/setup.R")
ggplot(badges, aes(x = date, y = cited_by, color = open)) +
geom_point(alpha = 0.4) +
geom_smooth(method = "loess", formula = y ~ x, se = FALSE) +
scale_x_date("Publicaton Date",
date_breaks = "1 year",
date_labels = "%Y") +
scale_y_log10("Cited By") +
scale_color_manual("Open Practices", values = c("firebrick", "dodgerblue")) +
limits(x = c(2014, 2022)) +
theme(legend.position = c(.85, .85),
axis.text.x = element_text(angle = -45, hjust = 0))
ggplot(badges, aes(x = date, y = cited_by, color = open)) +
geom_point(alpha = 0.4) +
geom_smooth(method = "loess", formula = y ~ x, se = FALSE) +
scale_x_date("Publicaton Date",
date_breaks = "1 year",
date_labels = "%Y") +
scale_y_log10("Cited By") +
scale_color_manual("Open Practices", values = c("firebrick", "dodgerblue")) +
xlim(2014, 2022)) +
ggplot(badges, aes(x = date, y = cited_by, color = open)) +
geom_point(alpha = 0.4) +
geom_smooth(method = "loess", formula = y ~ x, se = FALSE) +
scale_x_date("Publicaton Date",
date_breaks = "1 year",
date_labels = "%Y") +
scale_y_log10("Cited By") +
scale_color_manual("Open Practices", values = c("firebrick", "dodgerblue")) +
xlim(2014, 2022) +
theme(legend.position = c(.85, .85),
axis.text.x = element_text(angle = -45, hjust = 0))
badges |>
filter(year(date) < 2022) |>
ggplot(aes(x = date, y = cited_by, color = open)) +
geom_point(alpha = 0.4) +
geom_smooth(method = "loess", formula = y ~ x, se = FALSE) +
scale_x_date("Publicaton Date",
date_breaks = "1 year",
date_labels = "%Y") +
scale_y_log10("Cited By") +
scale_color_manual("Open Practices", values = c("firebrick", "dodgerblue"))
badges |>
filter(year(date) < 2022) |>
ggplot(aes(x = date, y = cited_by, color = open)) +
geom_point(alpha = 0.4) +
geom_smooth(method = "loess", formula = y ~ x, se = FALSE) +
scale_x_date("Publicaton Date",
date_breaks = "1 year",
date_labels = "%Y") +
scale_y_log10("Cited By") +
scale_color_manual("Open Practices", values = c("firebrick", "dodgerblue")) +
theme(legend.position = c(.85, .85),
axis.text.x = element_text(angle = -45, hjust = 0))
View(badges)
badges <- read_csv("data/psychsci-badges.csv") |>
mutate(open = data | materials | prereg,
years_pub <- interval(date, "2025-01-01") |> as.numeric("years"))
badges <- read_csv("data/psychsci-badges.csv") |>
mutate(open = data | materials | prereg,
years_pub = interval(date, "2025-01-01") |> as.numeric("years"),
cites_per_year = cited_by / years_pub)
badges |>
filter(year(date) < 2022) |>
ggplot(aes(x = date, y = cites_per_year, color = open)) +
geom_point(alpha = 0.4) +
geom_smooth(method = "loess", formula = y ~ x, se = FALSE) +
scale_x_date("Publicaton Date",
date_breaks = "1 year",
date_labels = "%Y") +
scale_y_log10("Citations per Year") +
scale_color_manual("Open Practices", values = c("firebrick", "dodgerblue")) +
theme(legend.position = c(.85, .85),
axis.text.x = element_text(angle = -45, hjust = 0))
badges |>
filter(year(date) < 2022) |>
ggplot(aes(x = date, y = cites_per_year, color = open)) +
geom_point(alpha = 0.4) +
geom_smooth(method = "lm", formula = y ~ x, se = FALSE) +
scale_x_date("Publicaton Date",
date_breaks = "1 year",
date_labels = "%Y") +
scale_y_log10("Citations per Year") +
scale_color_manual("Open Practices", values = c("firebrick", "dodgerblue")) +
theme(legend.position = c(.85, .85),
axis.text.x = element_text(angle = -45, hjust = 0))
badges |>
filter(year(date) < 2022) |>
ggplot(aes(x = date, y = cites_per_year, color = open)) +
geom_point(alpha = 0.4) +
geom_smooth(method = "lm", formula = y ~ x, se = FALSE) +
scale_x_date("Publicaton Date",
date_breaks = "1 year",
date_labels = "%Y") +
scale_y_log10("Citations per Year") +
scale_color_manual("Open Practices", values = c("firebrick", "dodgerblue")) +
theme(legend.position = c(.15, .85),
axis.text.x = element_text(angle = -45, hjust = 0))
badges |>
filter(year(date) < 2022) |>
ggplot(aes(x = date, y = cites_per_year, color = open)) +
geom_point(alpha = 0.4) +
geom_smooth(method = "lm", formula = y ~ x, se = FALSE) +
scale_x_date("Publicaton Date",
date_breaks = "1 year",
date_labels = "%Y") +
scale_y_log10("Citations per Year") +
scale_color_manual("Open Practices", values = c("firebrick", "dodgerblue")) +
theme(legend.position = c(.2, .85),
axis.text.x = element_text(angle = -45, hjust = 0))
badges |>
filter(year(date) < 2022) |>
ggplot(aes(x = date, y = cites_per_year, color = open)) +
geom_point(alpha = 0.4) +
geom_smooth(method = "lm", formula = y ~ x, se = FALSE) +
scale_x_date("Publicaton Date",
date_breaks = "1 year",
date_labels = "%Y") +
scale_y_log10("Citations per Year") +
scale_color_manual("Open Practices",
values = c("firebrick", "dodgerblue"),
labels = c("None", "1+")) +
theme(legend.position = c(.2, .85),
axis.text.x = element_text(angle = -45, hjust = 0))
badges |>
filter(year(date) < 2022) |>
ggplot(aes(x = date, y = cites_per_year, color = open)) +
geom_point(alpha = 0.4) +
geom_smooth(method = "lm", formula = y ~ x, se = FALSE) +
scale_x_date("Publication Date",
date_breaks = "1 year",
date_labels = "%Y") +
scale_y_log10("Citations per Year") +
scale_color_manual("Open Practices",
values = c("firebrick", "dodgerblue"),
labels = c("None", "date, materials and/or prereg")) +
theme(legend.position = c(.2, .85),
axis.text.x = element_text(angle = -45, hjust = 0))
badges |>
filter(year(date) < 2022) |>
mutate(open = case_when(
data & materials & prereg ~ "DMP",
data & materials ~ "DM",
data & prereg ~ "DP",
materials & prereg ~ "MP",
data ~ "D",
materials ~ "M",
prereg ~ "P",
.default = "None"
)) |>
ggplot(aes(x = date, y = cites_per_year, color = open)) +
geom_point(alpha = 0.4) +
geom_smooth(method = "lm", formula = y ~ x, se = FALSE) +
scale_x_date("Publication Date",
date_breaks = "1 year",
date_labels = "%Y") +
scale_y_log10("Citations per Year") +
scale_color_manual("Open Practices") +
theme(legend.position = c(.2, .85),
axis.text.x = element_text(angle = -45, hjust = 0))
badges |>
filter(year(date) < 2022) |>
mutate(open = case_when(
data & materials & prereg ~ "DMP",
data & materials ~ "DM",
data & prereg ~ "DP",
materials & prereg ~ "MP",
data ~ "D",
materials ~ "M",
prereg ~ "P",
.default = "None"
)) |>
ggplot(aes(x = date, y = cites_per_year, color = open)) +
geom_point(alpha = 0.4) +
geom_smooth(method = "lm", formula = y ~ x, se = FALSE) +
scale_x_date("Publication Date",
date_breaks = "1 year",
date_labels = "%Y") +
scale_y_log10("Citations per Year") +
scale_color_manual("Open Practices"values = rainbow(8)) +
badges |>
filter(year(date) < 2022) |>
mutate(open = case_when(
data & materials & prereg ~ "DMP",
data & materials ~ "DM",
data & prereg ~ "DP",
materials & prereg ~ "MP",
data ~ "D",
materials ~ "M",
prereg ~ "P",
.default = "None"
)) |>
ggplot(aes(x = date, y = cites_per_year, color = open)) +
geom_point(alpha = 0.4) +
geom_smooth(method = "lm", formula = y ~ x, se = FALSE) +
scale_x_date("Publication Date",
date_breaks = "1 year",
date_labels = "%Y") +
scale_y_log10("Citations per Year") +
scale_color_manual("Open Practices",
values = rainbow(8)) +
theme(legend.position = c(.2, .85),
axis.text.x = element_text(angle = -45, hjust = 0))
badges |>
filter(year(date) < 2022) |>
ggplot(aes(x = date, y = cites_per_year, color = open)) +
geom_point(alpha = 0.4) +
geom_smooth(method = "lm", formula = y ~ x, se = FALSE) +
scale_x_date("Publication Date",
date_breaks = "1 year",
date_labels = "%Y") +
scale_y_log10("Citations per Year") +
scale_color_manual("Open Practices",
values = c("firebrick", "dodgerblue"),
labels = c("None", "date, materials and/or prereg")) +
theme(legend.position = c(.2, .85),
axis.text.x = element_text(angle = -45, hjust = 0))
source("R/setup.R")
library(papercheck)
library(tidyverse)
theme_set(theme_minimal(base_size = 15))
badges <- read_csv("data/psychsci-badges.csv") |>
mutate(open = data | materials | prereg)
ggplot(badges, aes(x = cited_by,
y = year(date),
fill = open)) +
geom_col() +
coord_polar()
ggplot(badges, aes(x = year(date),
y = cited_by,
fill = open)) +
geom_col() +
coord_polar()
ggplot(badges, aes(x = year(date),
y = cited_by,
fill = open)) +
geom_col() +
scale_y_log10() +
coord_polar()
ggplot(badges, aes(x = year(date),
y = cited_by,
fill = open)) +
geom_point() +
scale_y_log10() +
coord_polar()
ggplot(badges, aes(x = year(date),
y = cited_by,
color = open)) +
geom_point() +
scale_y_log10() +
coord_polar()
ggplot(badges, aes(x = year(date),
y = cited_by,
color = open)) +
geom_point(alpha = 0.2) +
scale_y_log10() +
coord_polar()
?openalex
data("psychsci")
force(psychsci)
View(psychsci)
doi <- papercheck[[1]]$info$doi
doi <- psychscoi[[1]]$info$doi
doi <- psychsci[[1]]$info$doi
oa_info <- openalex(doi)
str(oa_info)
names(oa_info)
View(oa_info)
oa_info <- openalex(psychsci[[1]])
names(oa_info)
psychsci[[1]]
source("R/setup.R")
library(papercheck)
library(tidyverse)
theme_set(theme_minimal(base_size = 12))
oa_info <- openalex(psychsci[[1]])
names(oa_info)
psychsci[[11]]$info$doi
oa_info <- openalex(psychsci[10:11])
oa_info[[2]]
#| warning: true
oa_info <- openalex(psychsci[10:11])
oa_info[[2]]
doi_table <- info_table(psychsci, "doi")
View(doi_table)
doi_table
doi_table |> filter(grepl("[a-z]", doi, ignore.case = TRUE))
dois <- sub("[a-z\\.]+$", doi_table$doi)
dois <- sub("[a-z\\.]+$", "", doi_table$doi)
dois
oa_info <- openalex(dois)
saveRDS(oa_info, "data/oa_info.Rds")
oa_info <- readRDS("data/oa_info.Rds")
info <- oa_info[[1]]
info$title
info$publication_year
info$publication_date
date(info$publication_date)
info$apc_paid
lapply(oa_info, \(info) {
apc <- map_df(oa_info, \(info) {
list(
year = info$publication_year,
date = info$publication_date,
apc = info$apc_paid$value_usd
)
})
apc
list(
year = info$publication_year,
date = info$publication_date,
apc = info$apc_paid$value_usd
)
list(
year = info$publication_year,
date = info$publication_date,
apc = info$apc_paid$value_usd
)
list(
year = info$publication_year,
date = info$publication_date,
apc = info$apc_paid$value_usd
)
apc <- map_df(oa_info, \(info) {
list(
year = info$publication_year,
date = info$publication_date,
apc = info$apc_paid$value_usd
)
})
apc
View(apc)
x <- map_df(oa_info, \(info) {
list(
year = info$publication_year,
date = info$publication_date,
cited_by = info$cited_by_count
)
})
x <- map_df(oa_info, \(info) {
list(
year = info$publication_year,
date = info$publication_date,
cited_by = info$cited_by_count,
datasets = info$datasets
)
})
View(x)
info$datasets
x <- map_df(oa_info, \(info) {
list(
year = info$publication_year,
date = info$publication_date,
cited_by = info$cited_by_count,
datasets = info$datasets |> unlist() |> str()
)
})
View(x)
list(
year = info$publication_year,
date = info$publication_date,
cited_by = info$cited_by_count,
datasets = info$datasets |> str()
)
x <- map_df(oa_info, \(info) {
list(
year = info$publication_year,
date = info$publication_date,
cited_by = info$cited_by_count,
datasets = info$datasets |> str()
)
})
x <- map_df(oa_info, \(info) {
list(
year = info$publication_year,
date = info$publication_date,
cited_by = info$cited_by_count,
cnp = info$citation_normalized_percentile
)
})
View(x)
cites <- map_df(oa_info, \(info) {
list(
year = info$publication_year,
date = info$publication_date,
cited_by = info$cited_by_count,
cnp = info$citation_normalized_percentile$value
)
})
cites
ggplot(cites, aes(x = cited_by, y = cnp)) +
geom_point()
ggplot(cites, aes(x = 1-cited_by, y = cnp)) +
geom_point()
ggplot(cites, aes(x = cited_by, y = 1-cnp)) +
geom_point()
ggplot(cites, aes(x = cited_by, y = 1-cnp)) +
geom_point() +
scale_y_log10()
ggplot(cites, aes(x = cited_by, y = 1-cnp)) +
geom_point() +
scale_y_log10() +
scale_x_log10()
ggplot(cites, aes(x = cited_by, y = 1-cnp, colour = year)) +
geom_point() +
scale_y_log10() +
scale_x_log10()
